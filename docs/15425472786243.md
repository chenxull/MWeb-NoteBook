# Dragonfly
Dragonfly是一种基于P2P的智能镜像和文件分发系统。它旨在解决与文件传输过程中低效率，低成功率和网络带宽浪费相关的问题。特别是在大型文件分发场景中，如应用程序分发，缓存分发，日志分发，镜像分发等。在阿里巴巴，Dragonfly被调用20亿次，每月分发的数据为3.4PB。Dragonfly已成为阿里巴巴最重要的基础设施之一。可靠性高达99.9999％。

它提供了比原生docker快57倍的吞吐量，并节省高大99.5%的注册表带宽。

Dragonfly不光光可以对镜像文件进行分发，还可以对一个大些的数据文件进行分发，加快速度

## 特征
- 基于P2P的文件分发：利用P2P技术进行文件传输，充分利用每个对等体的带宽资源，提高下载效率，节省大量的跨IDC带宽，特别是昂贵的跨板带宽。
- 非侵入式支持各种容器技术：Dragonfly可以无缝支持各种容器分发镜像。
- 主机级别速度限制：许多下载工具（wget / curl）仅对当前下载任务具有速率限制，但dragonfly还为整个主机提供速率限制。
- 被动CDN：CDN机制可以避免重复的远程下载。
- 强一致性：即使用户不提供任何检查代码（MD5），Dragonfly也可以保证所有下载的文件必须一致。
- 磁盘保护和高效IO：预先检查磁盘空间，延迟同步，以最佳顺序写入文件块，拆分网络读取/磁盘写入等。
- 高性能：Cluster Manager完全是闭环的，这意味着它不依赖于任何数据库或分布式缓存，处理具有极高性能的请求。
- 异常自动隔离：Dragonfly将自动隔离异常节点（对等或集群管理器）以提高下载稳定性。
- 对文件源没有压力：通常，只要少数群集管理器从源下载文件。
- 支持标准http头：支持http头，通过http头提交身份验证信息。
- Registry Auth的有效并发控制：降低Registry Auth Service的压力。
- 简单易用：只需很少的配置。


## 在HPC环境中使用可行性

在Dragonfly在阿里巴巴进过双十一的考验，在自身性能和可靠性上完全没问题。每个计算中心为一个整体，在这个计算中心内部会有很多的机器集群，当有任务计算任务分配时，使用Dragonfly分发镜像到相应的机器上去，


