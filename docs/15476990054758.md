# 面向对象编程
面向对象编程有三大特性：封装，继承和多态。

面向对象编程里，计算机程序会被设计成彼此相关的对象。可以看做一种在程序中包含各种独立而又互相调用的对象的思想，这与传统程序设计主张将程序看做一系列函数的集合，或者直接就是一些系列对计算机下达的指令。面向对象程序设计中的每一个独享都应该能够接受数据，处理数据并将数据传达给其他对象。

**面向对象的核心理念**
- Program to an interface,not an implementation
    - 使用者不需要知道数据类型，结构，算法的细节
    - 使用者不需要知道实现细节，只需要知道提供的接口
    - 利于抽象，封装，动态绑定，多态
    - 符合面向对象的特质和理念
- Favor object compositon over class inheritance
    - 继承需要给子类暴露一些父类的设计和实现细节
    - 父类实现的改变会造成子类也需要改变
    - 我们以继承为主要是为了代码重用，但实际上在子类中需要重新实现很多父类的方法
    - 继承更多的应该是为了多态

    
    我们可以看到下面几个面向对象的事情。

- 我们使用接口抽象了具体的实现类。
- 然后其它类耦合的是接口而不是实现类。这就是多态，其增加了程序的可扩展性。
- 因为这就是接口编程，所谓接口也就是一种“协议”，就像 HTTP 协议一样。浏览器和后端的程序都依赖于这一种协议，而不是具体实现（如果是依赖具体实现，那么浏览器就要依赖后端的编程语言或中间件了，这就太恶心了）。于是，浏览器和后端的程序就完全解开依赖关系，而去依赖于一个标准的协议。
- 这就是面向对象的编程范式的精髓！同样也是 IoC/DIP（控制反转 / 依赖倒置）的本质。、

### IoC控制反转

![](https://static001.geekbang.org/resource/image/4d/13/4d1b95052b62dc82dc099302c8612613.jpg)

控制反转的意思是，开关从以前设备的专用开关，转变到了控制电源的开源，而以前的设备要反过来依赖于开关厂声明的电源连接接口。只要符合开关厂定义的电源连接的接口，这个开关就可以控制所有符合这个电源连接接口的设备。**也就是说，开关从依赖设备这种情况，变成了，设备反过来依赖于开关所定义的接口**

一下列子都是实际生活中的控制反转：

- 钱就是一个
- 交易的过程，卖家向买家卖东西，一手交钱一手交货，所以，基本上来说卖家和买家必需强耦合（必需见面）。这个时候，银行出来做担保，买家把钱先垫到银行，银行让卖家发货，买家验货后，银行再把钱打给卖家。这就是反转控制。买卖双方把对对方的直接依赖和控制，反转到了让对方来依赖一个标准的交易模型的接口。
- 海尔公司作为一个电器制商需要把自己的商品分销到全国各地，但是发现，不同的分销渠道有不同的玩法，于是派出了各种销售代表玩不同的玩法。随着渠道越来越多，发现，每增加一个渠道就要新增一批人和一个新的流程，严重耦合并依赖各渠道商的玩法。实在受不了了，于是制定业务标准，开发分销信息化系统，只有符合这个标准的渠道商才能成为海尔的分销商。让各个渠道商反过来依赖自己标准。反转了控制，倒置了依赖。

这种控制反转的思想对我们的系统架构也有着深深的影响，化被动为主动
- 云计算平台中有很多的云产品线。一些底层服务的开发团队只管开发底层的技术，然后什么也不管了，就交给上层的开发人员。上层开发人员在底层团队开发出来的产品上面开发各种管理这个底层资源的东西，比如：生产底层资源的业务，底层资源的控制台，底层资源的监控系统。然而，随着接入的资源越来越多，上层为各个云资源控制生产，开发控制台和监控的团队，完全干不过来了。这个时候依赖倒置和反转控制又可以解决问题了。为了有统一体验，各个云产品线需要遵从一定的协议或规范来开发。比如，每个云产品团队需要按照标准定义相关资源的生命周期管理，提供控制台，接入整体监控系统，通过标准的协议开发控制系统。